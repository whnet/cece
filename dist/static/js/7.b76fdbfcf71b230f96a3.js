webpackJsonp([7],{"6+H1":function(e,n,o){"use strict";function t(e,n){var o=e,t=RongIMLib.RongIMClient,s={};s.protobuf="./static/rongyun/protobuf-2.3.1.min.js",t.init("qf3d5gbjqhy6h",null,s);t.getInstance();t.setConnectionStatusListener({onChanged:function(e){switch(console.log(e),e){case RongIMLib.ConnectionStatus.CONNECTED:case 0:console.log("连接成功");break;case RongIMLib.ConnectionStatus.CONNECTING:case 1:console.log("连接中");break;case RongIMLib.ConnectionStatus.DISCONNECTED:case 2:console.log("当前用户主动断开链接");break;case RongIMLib.ConnectionStatus.NETWORK_UNAVAILABLE:case 3:console.log("网络不可用");break;case RongIMLib.ConnectionStatus.CONNECTION_CLOSED:case 4:console.log("未知原因，连接关闭");break;case RongIMLib.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT:case 6:alert("用户账户在其他设备登录，本机会被踢掉线");break;case RongIMLib.ConnectionStatus.DOMAIN_INCORRECT:case 12:console.log("当前运行域名错误，请检查安全域名配置")}}}),t.connect(o,{onSuccess:function(e){console.log("rongyunjs="+e),n.getCurrentUser&&n.getCurrentUser({userId:e})},onTokenIncorrect:function(){console.log("token无效")},onError:function(e){console.log(e)}});var r={onSuccess:function(e){n.getCurrentUser&&n.getCurrentUser({userId:e}),console.log("Reconnect successfully. "+e)},onTokenIncorrect:function(){console.log("token无效")},onError:function(e){console.log(errorcode)}},s={auto:!0,url:"cdn.ronghub.com/RongIMLib-2.2.6.min.js",rate:[100,1e3,3e3,6e3,1e4]};t.reconnect(r,s),t.setOnReceiveMessageListener({onReceived:function(e){switch(e.messageType){case t.MessageType.TextMessage:case t.MessageType.VoiceMessage:case t.MessageType.ImageMessage:case t.MessageType.DiscussionNotificationMessage:case t.MessageType.RichContentMessage:}n.receiveNewMessage&&n.receiveNewMessage(e)}})}function s(e){var n={conversationType:RongIMLib.ConversationType.PRIVATE,targetId:e,timestamp:0};RongIMLib.RongIMClient.getInstance().clearRemoteHistoryMessages(n,{onSuccess:function(){},onError:function(e){console.log(e)}})}function r(e,n,o,t){var s=new RongIMLib.ImageMessage({content:n,imageUri:o}),r=RongIMLib.ConversationType.PRIVATE,c=e;console.log("rongyun-conver:"+r),console.log("rongyun-targetId:"+c),console.log("rongyun-msg:"+s),RongIMClient.getInstance().sendMessage(r,c,s,{onSuccess:function(e){t.sendImage&&t.sendImage(e)}})}function c(e,n,o,t){RongIMClient.getInstance().sendMessage(e,n,o,{onSuccess:function(e){t.sendMessage&&t.sendMessage(e)},onError:function(e,n){var o="";switch(e){case RongIMLib.ErrorCode.TIMEOUT:o="超时";break;case RongIMLib.ErrorCode.UNKNOWN_ERROR:o="未知错误";break;case RongIMLib.ErrorCode.REJECTED_BY_BLACKLIST:o="在黑名单中，无法向对方发送消息";break;case RongIMLib.ErrorCode.NOT_IN_DISCUSSION:o="不在讨论组中";break;case RongIMLib.ErrorCode.NOT_IN_GROUP:o="不在群组中";break;case RongIMLib.ErrorCode.NOT_IN_CHATROOM:o="不在聊天室中";break;default:o=x}console.log("发送失败:"+o)}})}n.c=t,n.b=s,n.a=r,n.d=c;var a=o("mvHQ");o.n(a)},HHHD:function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=o("gRE1"),s=o.n(t),r=o("mvHQ"),c=o.n(r),a=o("6+H1"),i=(o("NYxO"),o("g5nd"),{data:function(){return{msgContent:[],targetId:""}},created:function(){this.getOrderInfo()},methods:{getOrderInfo:function(){var e=this;return this.$api.ciciouuml(this.$route.query.orderid).then(function(n){var o=n.data.tomember+n.data.out_trade_no,t=n.data.tomember+n.data.out_trade_no,s=n.data.mid+n.data.out_trade_no;e.targetId=s,e.getRongYunToken(o,t)})},getRongYunToken:function(e,n){var o=this,t={userId:e,userName:n,avatar:"vip"};return this.$api.downrongyun(t).then(function(e){o.startInit(e.data.token)})},startInit:function(e){var n=this,o=(this.$route.query.orderid,{getCurrentUser:function(e){n.getHistoryMessages()},receiveNewMessage:function(e){n.msgContent}});a.c(e,o)},getHistoryMessages:function(){var e=this;console.log(e.targetId);var n=RongIMLib.ConversationType.PRIVATE,o=e.targetId;RongIMLib.RongIMClient.getInstance().getHistoryMessages(n,o,null,20,{onSuccess:function(n,o){var t=n;if(e.msgContent=t.concat(e.msgContent),!o){var r=c()(s()(e.msgContent));return e.$api.chatlogs(e.$route.query.orderid,{chatrecord:r}).then(function(e){})}e.getHistoryMessages()}})}}}),g=function(){var e=this,n=e.$createElement;return(e._self._c||n)("div",{staticClass:"mui-content"},[e._v("downChatRecord")])},u=[],l={render:g,staticRenderFns:u},I=l,d=o("VU/8"),M=d(i,I,!1,null,null,null);n.default=M.exports},TmV0:function(e,n,o){o("fZOM"),e.exports=o("FeBl").Object.values},fZOM:function(e,n,o){var t=o("kM2E"),s=o("mbce")(!1);t(t.S,"Object",{values:function(e){return s(e)}})},gRE1:function(e,n,o){e.exports={default:o("TmV0"),__esModule:!0}},mbce:function(e,n,o){var t=o("+E39"),s=o("lktj"),r=o("TcQ7"),c=o("NpIQ").f;e.exports=function(e){return function(n){for(var o,a=r(n),i=s(a),g=i.length,u=0,l=[];g>u;)o=i[u++],t&&!c.call(a,o)||l.push(e?[o,a[o]]:a[o]);return l}}}});
//# sourceMappingURL=7.b76fdbfcf71b230f96a3.js.map